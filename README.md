The goal of my work was to create a system with the ability to configure without interference in the source code and that would perform only specified actions on the data, depending on the configurations installed by user. Thus I wanted to get a universal tool for streaming data processing.

Цель моей работы заключалась в создании системы с возможностью конфигурирования без вмешательства в исходный код и способную в зависимости от конфигураций, установленных пользователем, выполнять только указанные действия над данными. Таким образом я хотел получить универсальное средство потоковой обработки данных.

Передо мной стояли следующие задачи:

- Реализовать конвейер данных для фильтрации, трансформации и удаления повторений.

- Реализовать базу данных конфигураций на PostgreSQL.

- Создать для пользователя интерфейс для управления жизненным циклом конвейера.

- Настроить тестовый ввод и вывод больших данных.

Основой программы был выбран Apache Spark Structured Streaming, как современный фреймворк обработки данных, с большим количеством пользователей и регулярными обновлениями. В качестве языка программирования я выбрал Java, в основном из-за опыта работы с ним. По той же причине для написания базы данных конфигураций был использован PostgreSQL. На вход было решено подавать строки формата JSON, как одного из самых популярных.

В основном классе программы был реализован таймер, который в равные интервалы времени получает значения из конфигурационной базы данных. Взаимодействие с базой данных осуществляется с использованием библиотеки JOOQ. Таким образом операции, выполняемые над данными, могут быть изменены во время работы программы. Для фильтрации в базе данных может быть указанно несколько параметров с логическими операторами "И", "ИЛИ", из которых можно сделать выражение для фильтрации данных. В процессе трансформации данных из строки удаляются ненужные поля. Поля, которые необходимо сохранить, записываются в конфигурационную базу данных в текстовом формате. Тем самым мы получаем универсальную трансформацию данных по полям, так как названия полей находятся не в исходном коде и могут быть изменены динамически. Для работы с удалением повторов было решено создать вторую базу данных для хранения обработанных значений и времени, когда они были обработаны. В фоновом режиме работает отдельный поток, который в заданный интервал времени проверяет актуальность хранимых объектов. Элемент удаляется из базы данных если время его жизни истекло (TTL- Time To Live).

Таким образом была получена универсальная система обработки данных, в которой можно, прямо во время работы, установить необходимые фильтры, поля для удаления повторов и вывода. Наличие данной системы может сохранить время при начале работы над новым проектом, с новыми данными. В дальнейшем возможно расширение функционала и создание удобного интерфейса, чтобы даже не связанный с программированием пользователь мог работать с системой.
